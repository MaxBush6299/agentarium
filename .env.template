# Azure Agents Demo - Environment Configuration Template
# Copy this file to .env and fill in with your actual values
# IMPORTANT: Never commit .env to version control - add it to .gitignore

# ============================================================================
# AZURE SUBSCRIPTION & DEPLOYMENT
# ============================================================================

# Azure subscription ID
AZURE_SUBSCRIPTION_ID=your-subscription-id-here

# Azure resource group name
AZURE_RESOURCE_GROUP=agents-demo-rg

# Azure region for deployment (e.g., eastus, westus2, northeurope)
AZURE_REGION=eastus

# Environment name (dev, staging, prod)
ENVIRONMENT_NAME=dev

# Resource naming prefix
RESOURCE_PREFIX=agents-demo

# Tags for all resources (JSON format)
RESOURCE_TAGS='{"Environment":"demo","Project":"AIAgents","ManagedBy":"Infrastructure","Cost-Center":"Engineering"}'

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# Virtual Network CIDR block
VNET_ADDRESS_SPACE=10.0.0.0/16

# Container Apps subnet CIDR
CONTAINER_APPS_SUBNET_SPACE=10.0.1.0/24

# Private Endpoints subnet CIDR
PRIVATE_ENDPOINTS_SUBNET_SPACE=10.0.2.0/24

# Integration subnet CIDR (reserved)
INTEGRATION_SUBNET_SPACE=10.0.3.0/24

# ============================================================================
# COSMOS DB
# ============================================================================

# Cosmos DB account name (must be globally unique, lowercase)
COSMOS_DB_ACCOUNT_NAME=cosmosdb-agents-${ENVIRONMENT_NAME}

# Cosmos DB throughput mode: manual or autoscale
COSMOS_DB_THROUGHPUT_MODE=autoscale

# Cosmos DB autoscale max throughput (400-4000 for demo, up to 1M for prod)
COSMOS_DB_AUTOSCALE_MAX_THROUGHPUT=4000

# Cosmos DB manual throughput (if not using autoscale)
COSMOS_DB_MANUAL_THROUGHPUT=400

# Cosmos DB database name
COSMOS_DB_NAME=agents-db

# Enable Cosmos DB geo-redundant backups
COSMOS_DB_GEO_BACKUP=true

# ============================================================================
# KEY VAULT
# ============================================================================

# Key Vault name (must be globally unique, lowercase)
KEY_VAULT_NAME=kv-agents-${ENVIRONMENT_NAME}

# Enable soft delete (recommended: true)
KEY_VAULT_SOFT_DELETE=true

# Enable purge protection (recommended: true)
KEY_VAULT_PURGE_PROTECTION=true

# Enable private endpoints for Key Vault
KEY_VAULT_PRIVATE_ENDPOINTS=true

# ============================================================================
# STORAGE ACCOUNT
# ============================================================================

# Storage account name (must be globally unique, lowercase, 3-24 chars)
STORAGE_ACCOUNT_NAME=stgagents${ENVIRONMENT_NAME}

# Enable hierarchical namespace (for Data Lake features)
STORAGE_HNS_ENABLED=false

# Minimum TLS version (TLS1_0, TLS1_1, TLS1_2, TLS1_3)
STORAGE_MIN_TLS_VERSION=TLS1_2

# Enable private endpoints for Storage
STORAGE_PRIVATE_ENDPOINTS=true

# Blob container names (comma-separated)
STORAGE_BLOB_CONTAINERS=logs,artifacts,exports

# ============================================================================
# CONTAINER APPS
# ============================================================================

# Container Apps Environment name
CONTAINER_APPS_ENV_NAME=cae-${ENVIRONMENT_NAME}

# Frontend container app name
FRONTEND_APP_NAME=ca-frontend-${ENVIRONMENT_NAME}

# Frontend container image URI
FRONTEND_IMAGE=mcr.microsoft.com/azuredocs/containerapps-helloworld:latest

# Frontend CPU allocation (e.g., 0.5, 1.0)
FRONTEND_CPU=0.5

# Frontend memory allocation (e.g., 1Gi, 2Gi)
FRONTEND_MEMORY=1Gi

# Frontend min replicas
FRONTEND_MIN_REPLICAS=1

# Frontend max replicas
FRONTEND_MAX_REPLICAS=3

# Backend container app name
BACKEND_APP_NAME=ca-backend-${ENVIRONMENT_NAME}

# Backend container image URI
BACKEND_IMAGE=mcr.microsoft.com/azuredocs/containerapps-helloworld:latest

# Backend CPU allocation (e.g., 0.5, 1.0)
BACKEND_CPU=1.0

# Backend memory allocation (e.g., 1Gi, 2Gi)
BACKEND_MEMORY=2Gi

# Backend min replicas
BACKEND_MIN_REPLICAS=1

# Backend max replicas
BACKEND_MAX_REPLICAS=5

# ============================================================================
# APPLICATION INSIGHTS & MONITORING
# ============================================================================

# Log Analytics workspace name
LOG_ANALYTICS_WORKSPACE_NAME=law-agents-${ENVIRONMENT_NAME}

# Application Insights name
APP_INSIGHTS_NAME=appi-agents-${ENVIRONMENT_NAME}

# Log retention days (30, 90, 180, 365, etc.)
LOG_RETENTION_DAYS=30

# Application Insights daily data cap in GB (0 = unlimited)
APP_INSIGHTS_DAILY_CAP_GB=10

# ============================================================================
# EXTERNAL SERVICES (Secrets - Replace with actual values)
# ============================================================================

# OpenAI API Key (https://platform.openai.com/api-keys)
OPENAI_API_KEY=sk-your-actual-openai-key-here

# Azure OpenAI Service endpoint and key (if using Azure OpenAI instead)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-key-here
AZURE_OPENAI_DEPLOYMENT=gpt-4

# ============================================================================
# MANAGED IDENTITY & RBAC
# ============================================================================

# Principal IDs of users/groups that need access to secrets
# (CSV of Object IDs from Microsoft Entra ID)
ADMIN_PRINCIPAL_IDS=00000000-0000-0000-0000-000000000000

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Bicep parameter file to use
BICEP_PARAM_FILE=infra/parameters/${ENVIRONMENT_NAME}.bicepparam

# Additional tags (JSON format)
ADDITIONAL_TAGS={}

# Enable validation before deployment
VALIDATE_ONLY=false

# ============================================================================
# SECRET REFERENCE PATTERNS (Auto-generated by deployment)
# ============================================================================
# These will be populated after successful deployment:

# Key Vault URI
KEY_VAULT_URI=https://kv-agents-${ENVIRONMENT_NAME}.vault.azure.net/

# Cosmos DB Endpoint
COSMOS_DB_ENDPOINT=https://cosmosdb-agents-${ENVIRONMENT_NAME}.documents.azure.com:443/

# Storage Account Blob Endpoint
STORAGE_BLOB_ENDPOINT=https://stgagents${ENVIRONMENT_NAME}.blob.core.windows.net/

# Application Insights Instrumentation Key
APP_INSIGHTS_INSTRUMENTATION_KEY=will-be-set-after-deployment

# Container Apps Frontend FQDN
FRONTEND_FQDN=will-be-set-after-deployment

# Container Apps Backend FQDN
BACKEND_FQDN=will-be-set-after-deployment
